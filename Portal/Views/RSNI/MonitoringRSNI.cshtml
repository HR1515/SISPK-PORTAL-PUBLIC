@using Portal.Helpers;

<style>
    table > thead > tr > td {
        font-weight:bold;
        font-size:14px;
        vertical-align:middle !important;
        text-align:center !important;
    }
</style>

<style>
    * {
        box-sizing: border-box;
    }

    .dahboardprogress {
        padding: 0;
        list-style-type: none;
        font-family: arial;
        font-size: 12px;
        clear: both;
        line-height: 1em;
        margin: 0 -1px;
        text-align: center;
    }

        .dahboardprogress li {
            float: left;
            padding: 10px 10px 10px 20px;
            background: hsla(34,85%,55%,1);
            color: #fff;
            position: relative;
            border-top: 1px solid hsla(34,85%,55%,1);
            border-bottom: 1px solid hsla(34,85%,55%,1);
            width: 8.5%;
            margin: 5px 1px;
        }

            .dahboardprogress li a {
                color: #fff;
                font-size: 13px;
                text-decoration: none;
            }

            .dahboardprogress li:before {
                content: '';
                border-left: 16px solid #fff;
                border-top: 16px solid transparent;
                border-bottom: 16px solid transparent;
                position: absolute;
                top: 0;
                left: 0;
            }

            .dahboardprogress li:after {
                content: '';
                border-left: 16px solid hsla(34,85%,55%,1);
                border-top: 16px solid transparent;
                border-bottom: 16px solid transparent;
                position: absolute;
                top: 0;
                left: 100%;
                z-index: 20;
            }

            .dahboardprogress li.active {
                background: hsla(34,85%,25%,1);
                border-color: hsla(34,85%,25%,1);
            }

                .dahboardprogress li.active:after {
                    border-left-color: hsla(34,85%,25%,1);
                }


    .static_label {
        font-size: 14px;
        color: #333333;
        font-family: "Open Sans",sans-serif;
        font-weight: normal;
    }

    .tableprogress {
        padding: 0;
        list-style-type: none;
        font-family: arial;
        font-size: 12px;
        clear: both;
        line-height: 1em;
        margin: 0 -1px;
        text-align: center;
    }

        .tableprogress li {
            float: left;
            padding: 2px 2px 2px 4px;
            background: hsla(34,85%,55%,1);
            color: #fff;
            position: relative;
            border-top: 1px solid hsla(34,85%,55%,1);
            border-bottom: 1px solid hsla(34,85%,55%,1);
            width: 9.5%;
            margin: 0px 1px 0px 1px;
        }

            .tableprogress li a {
                color: #fff;
                font-size: 12px;
                text-decoration: none;
            }

            .tableprogress li:before {
                content: '';
                border-left: 8px solid #fff;
                border-top: 8px solid transparent;
                border-bottom: 8px solid transparent;
                position: absolute;
                top: 0;
                left: 0;
            }

            .tableprogress li:after {
                content: '';
                border-left: 8px solid hsla(34,85%,55%,1);
                border-top: 8px solid transparent;
                border-bottom: 8px solid transparent;
                position: absolute;
                top: 0;
                left: 100%;
                z-index: 20;
            }

            .tableprogress li.active {
                background: hsla(34,85%,25%,1);
                border-color: hsla(34,85%,25%,1);
            }

                .tableprogress li.active:after {
                    border-left-color: hsla(34,85%,25%,1);
                }
</style>

<div class="container">
    <ul class="breadcrumb">
        <li><a href="javascript:void(0);">RSNI</a></li>
        <li class="active">Monitoring RSNI</li>
    </ul>

    <div class="row margin-bottom-40">

        <div class="col-md-12 col-sm-12">
            <div class="portlet box green">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-table"></i>Monitoring RSNI
                    </div>
                    
                </div>
                <div class="portlet-body form">
                    <div class="tab-content">
                        <table id="monitoring" class="display table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th class="text-center" style="width: 30px;"><i class="action fa fa-file-text-o"></th>
                                    <th class="text-center">PROPOSAL ID</th>
                                    <th class="text-center" style="width: 90px;">Kode<br />
                                        PNPS</th>
                                    <th class="text-center">Kode<br />
                                        Komtek</th>
                                    <th class="text-center">Nama<br />
                                        Komtek</th>
                                    <th class="text-center">Komite<br />
                                        Teknis</th>
                                    <th class="text-center" style="width: 100px;">Jenis<br />
                                        Perumusan</th>
                                    <th class="text-center">Judul PNPS</th>
                                    <th class="text-center">Ruang<br />
                                        Lingkup</th>
                                    <th class="text-center" style="width: 600px;">Progress</th>
                                </tr>
                            </thead>
                        </table>
                        <div class="actions">

                            <ul class="tableprogress" style="padding-top:10px;padding-bottom:10px;">
                                <li class="active" style="width:110px;padding-left:6px">Proses Selesai</li>
                                <li class="" style="width:110px">Belum Proses</li>
                            </ul>
                            <div class="clear-fix"></div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function format(d) {
        return '<table>' +
            '<tr>' +
            '<td style="width:140px;font-weight:bold;vertical-align:top;">Kode PNPS</td>' +
            '<td class="text-center" style="padding-left:10px;padding-right:10px;font-weight:bold;vertical-align:top;">:</td>' +
            '<td>' + d.PROPOSAL_PNPS_CODE + '</td>' +
            '</tr>' +
             '<tr>' +
            '<td style="width:140px;font-weight:bold;vertical-align:top;">Jenis Perumusan</td>' +
            '<td class="text-center" style="padding-left:10px;padding-right:10px;font-weight:bold;vertical-align:top;">:</td>' +
            '<td>' + d.PROPOSAL_JENIS_PERUMUSAN_NAME + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td style="width:140px;font-weight:bold;vertical-align:top;">Nama Komtek</td>' +
            '<td class="text-center" style="padding-left:10px;padding-right:10px;font-weight:bold;vertical-align:top;">:</td>' +
            '<td>' + d.KOMTEK_CODE + ' ' + d.KOMTEK_NAME + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td style="width:140px;font-weight:bold;vertical-align:top;">Judul PNPS</td>' +
            '<td class="text-center" style="padding-left:10px;padding-right:10px;font-weight:bold;vertical-align:top;">:</td>' +
            '<td>' + d.PROPOSAL_JUDUL_PNPS + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td style="width:140px;font-weight:bold;vertical-align:top;">Ruang Lingkup</td>' +
            '<td class="text-center" style="padding-left:10px;padding-right:10px;font-weight:bold;vertical-align:top;">:</td>' +
            '<td style="vertical-align:top;">' + d.PROPOSAL_RUANG_LINGKUP + '</td>' +
            '</tr>' +
            '</table>';
    }
    jQuery(document).ready(function () {
        var dt = $('#monitoring').DataTable({
            "processing": true,
            "serverSide": true,
            "bServerSide": true,
            "sAjaxSource": "/RSNI/ListMonitoringRsni",
            "language": {
                "aria": {
                    "sortAscending": ": activate to sort column ascending",
                    "sortDescending": ": activate to sort column descending"
                },
                "emptyTable": "Data tidak tersedia",
                "info": "Menampilkan _START_ sampai _END_ dari _TOTAL_ data",
                "infoEmpty": "Menampilkan 0 Data",
                "infoFiltered": "",
                "lengthMenu": "Menampilkan _MENU_ Data",
                "search": "Pencarian:",
                "zeroRecords": "Pencarian Tidak Ditemukan",
                "sProcessing": "Proses Pengambilan Data",
            },
            "fnDrawCallback": function () {
                $('.tooltips').tooltip();
            },
            "columns": [
                {
                    "class": "details-control",
                    "orderable": false,
                    "data": "<i class='action fa fa-file-text-o'></i>",
                    "defaultContent": ""
                },
                { "data": "PROPOSAL_ID" },
                { "data": "PROPOSAL_PNPS_CODE" },
                { "data": "KOMTEK_CODE" },
                { "data": "KOMTEK_NAME" },
                { "data": "KOMTEK_FULLNAME" },
                { "data": "PROPOSAL_JENIS_PERUMUSAN_NAME" },
                { "data": "PROPOSAL_JUDUL_PNPS" },
                { "data": "PROPOSAL_RUANG_LINGKUP" },
                { "data": "PROGRESS", "orderable": false, }
            ],
            "columnDefs": [
                {
                    "render": function (data, type, row) {
                        return '<center><a href="javascript:void(0)"><i class="action fa fa-file-text-o"></a></center>';
                    },
                    "targets": 0
                },
                {
                    "targets": [1, 2, 3, 4, 5, 6, 8],
                    "visible": false
                }
            ],
            "order": [[0, 'desc']]
        });

        var tableWrapper = $('.dataTables_wrapper');
        tableWrapper.find('.dataTables_length select').select2();
        // Array to track the ids of the details displayed rows
        var detailRows = [];

        $('#monitoring tbody').on('click', 'tr td.details-control', function () {
            var tr = $(this).closest('tr');
            var row = dt.row(tr);
            var idx = $.inArray(tr.attr('id'), detailRows);

            if (row.child.isShown()) {
                tr.removeClass('detailstable');
                row.child.hide();

                // Remove from the 'open' array
                detailRows.splice(idx, 1);
            }
            else {
                tr.addClass('detailstable');
                row.child(format(row.data())).show();

                // Add to the 'open' array
                if (idx === -1) {
                    detailRows.push(tr.attr('id'));
                }
            }
        });

        // On each draw, loop over the `detailRows` array and show any child rows
        dt.on('draw', function () {
            $.each(detailRows, function (i, id) {
                $('#' + id + ' td.details-control').trigger('click');
            });
        });

    });
</script>



